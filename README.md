# svorg

Simplistic CLI tool to generate static SVG org chart from JSON data and templates.

# Usage

`svorg [-h] [-c CONFIG] -i INPUT [-o] output`

### Positional arguments

* `output`: output SVG to generate

### Options

* `-h`, `--help`: show help message and exit
* `-c CONFIG`, `--config CONFIG`: config file to use (regarding format check README and/or sample.cfg)
* `-i INPUT`, `--input INPUT`: data file to use (regarding format check README and/or sample.json)
* `-o`, `--overwrite`: overwrite output without asking

# Overall behavior

1. Read config and input files.
2. Traverse nodes and calculate position and size of nodes.
3. Generate SVG file:
    1. Use the **SVG template** to generate the SVG header
    2. Use the **line template** for each node except the root, and generate the SVG elements that connect the node to its parent
    3. Use the **node template** for each node, and generate the SVG elements that represent the node
    4. Generate the SVG footer which is actually the `</SVG>` closing tag.

# Templates

The line and node templates allow to define practically any appearance that SVG supports. Refer to SVG specifications, such as [https://developer.mozilla.org/en-US/docs/Web/SVG](https://developer.mozilla.org/en-US/docs/Web/SVG).

The templates are simply treated as Python format strings. Hence, the actual SVG snippet is generated by using the given template in a String format() call along with a dictionary of parameters.

The parameter dictionary contains:
* all key-value pairs in the config
* all attributes of the given node
* **calculated coordinate** fields of node
* if parent exists, **calculated coordinate** fields of parent node, prefixed with 'Parent'

**Calculated coordinate** fields are:
* `Left`
* `LeftPlusStackPad`
* `Center`
* `RightMinusStackPad`
* `Right`
* `Top`
* `Middle`
* `Bottom`

# Config file format

The config file is a dictionary of key-value pairs in JSON format.

A few keys are mandatory, since the program uses them to calculate the position of nodes:

* `NodeWidth`: width of nodes
* `NodeHeight`: height of nodes
* `Pad`: padding used around nodes and the edge of the chart
* `LevelPad`: padding between subsequent org levels
* `StackPad`: padding used around nodes that have their children nodes stacked

By default the program uses the below templates to assemble the SVG:

* `NodeTemplate`: template used to generate the SVG element(s) that represent a node
* `LineTemplate`: template used to generate the SVG element(s) that represent a line between a node and its parent
* `StackLineTemplate`: template used to generate the SVG element(s) that represent a line between a node and its parent when children nodes are stacked

As mentioned, the above templates are default. This means actual template to use can be specified in the input file (see later).

# Input file format

The input is a JSON file that contains the list of nodes, each node being a dictionary of key-value pairs.

The following summarize what keys has to or can be defined for nodes.

### Mandatory keys

* `Id`: any string that identifies the node, and hence can be referenced by another node as parent
* `ParentId`: the `Id` of the parent node

### Optional keys influencing layout

* `StackChildren`: if set to `True`, children nodes are stacked vertically under the parent. Otherwise (omitted or set to `False`) the layout follows the default approach where children nodes are spread horizontally under the parent. Default value: `False`.
* `LevelOffset`: adjust the level of node. A value of `0` does not have any impact. A value of `1` pushes the node down by 1 level, which is the same level where the 'grandchildren' nodes are positioned. Higher values push the node further downwards. Default value: `0`.

### Optional template keys

The following keys refer to one of the templates in the config file and define which template to use to render the node or its connection to its parent.

* `NodeTemplate`: template to use to generate the node. Default value: `NodeTemplate`.
* `LineTemplate`: template to use to generate the connection between the node and its parent. Default value: `LineTemplate`.
* `StackLineTemplate`: template to use to generate the connection between the node and its parent, when children nodes are stacked. Default value: `StackLineTemplate`.

### Optional keys

Nodes can have any other keys defined, that can be referenced in the templates. For example, name and/or title of employee, name of team or department, etc.

# Backlog

* Certain layouts do not render properly, typically when `StackChildren=True` is applied on non-leaf nodes
* Streamline padding settings
* Include visual explanation chart
* Include more samples
* Support for multiple root elements (eg, place charts next to eachother)
* Better error handling for unique `Id` and `ParentId` reference integrity
* Support PNG output